{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/takasivenkatasandeep/Desktop/nursery/src/Containers/EditItem/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Loader from '../../Components/Loader';\nimport { Typography } from '@material-ui/core';\nimport CommonItemForm from '../../Components/CommonItemForm';\nimport { useForm } from 'react-hook-form';\nimport { uploadImage, updateDocument, getSingleDocument } from '../../services/firebase';\n\nfunction Index({\n  loggedinUser,\n  match,\n  history\n}) {\n  _s();\n\n  const collectionName = match.params.collectionName;\n  const id = match.params.id;\n  const [loading, setLoading] = React.useState(false);\n  const [isAdmin, setIsAdmin] = React.useState(false);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    mode: \"onChange\"\n  });\n  const [buttonLoading, setButtonLoading] = React.useState(false);\n  const [item, setItem] = React.useState({});\n  React.useEffect(() => {\n    let mounted = true;\n\n    async function initializeEditItem() {\n      setLoading(true);\n\n      if (Object.keys(loggedinUser).length !== 0) {\n        const isAdminResponse = await getSingleDocument('users', loggedinUser.id);\n        console.log(isAdminResponse);\n\n        if (isAdminResponse.isAdmin) {\n          setIsAdmin(true);\n          const itemData = await getSingleDocument(collectionName, id);\n          setItem(itemData);\n        }\n      }\n\n      setLoading(false);\n    }\n\n    initializeEditItem();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  const formData = [{\n    name: collectionName === \"pots\" || collectionName === \"bowls\" ? \"type\" : \"name\",\n    error: errors.type,\n    helperText: errors.type ? errors.type.message : null,\n    value: Object.keys(item) !== 0 && (collectionName === \"pots\" || collectionName === \"bowls\") ? item.type : item.name,\n    type: \"text\"\n  }, {\n    name: \"price\",\n    error: errors.price,\n    helperText: errors.price ? errors.price.message : null,\n    value: item.price,\n    type: \"number\"\n  }];\n\n  if (collectionName === \"pots\" || collectionName === \"bowls\") {\n    formData.push({\n      name: \"color\",\n      error: errors.color,\n      helperText: errors.color ? errors.color.message : null,\n      value: item.color,\n      type: \"text\"\n    });\n  }\n\n  const updateEditedDocument = async data => {\n    setButtonLoading(true);\n\n    if (data.image.length !== 0) {\n      let url = await uploadImage(collectionName, new Date().toLocaleDateString(), data.image[0]);\n      delete data.image;\n      data.imageUrl = url;\n      await updateDocument(collectionName, id, data);\n      setButtonLoading(false);\n    } else {\n      delete data.image;\n      await updateDocument(collectionName, id, data);\n      setButtonLoading(false);\n    }\n\n    history.push(`/${collectionName === \"giftPlants\" ? 'gitf/plants' : collectionName === \"plants\" ? '' : collectionName}`);\n  };\n\n  if (!loading) {\n    if (isAdmin) {\n      return /*#__PURE__*/_jsxDEV(CommonItemForm, {\n        item: item,\n        collectionName: collectionName,\n        loading: buttonLoading,\n        register: register,\n        handleFunction: handleSubmit(updateEditedDocument),\n        formData: formData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h4\",\n          color: \"secondary\",\n          children: \"You have no access to this page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 24\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 16\n    }, this);\n  }\n}\n\n_s(Index, \"nqgZBtlvPGIphzpCmwRwZlt9D2A=\", false, function () {\n  return [useForm];\n});\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/Users/takasivenkatasandeep/Desktop/nursery/src/Containers/EditItem/index.js"],"names":["React","Loader","Typography","CommonItemForm","useForm","uploadImage","updateDocument","getSingleDocument","Index","loggedinUser","match","history","collectionName","params","id","loading","setLoading","useState","isAdmin","setIsAdmin","register","handleSubmit","errors","mode","buttonLoading","setButtonLoading","item","setItem","useEffect","mounted","initializeEditItem","Object","keys","length","isAdminResponse","console","log","itemData","formData","name","error","type","helperText","message","value","price","push","color","updateEditedDocument","data","image","url","Date","toLocaleDateString","imageUrl"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Loader from '../../Components/Loader'\nimport { Typography } from '@material-ui/core'\nimport CommonItemForm from '../../Components/CommonItemForm'\nimport { useForm } from 'react-hook-form'\nimport {uploadImage,updateDocument,getSingleDocument} from '../../services/firebase'\n\nfunction Index({\n    loggedinUser,\n    match,\n    history\n}) {\n    const collectionName = match.params.collectionName\n    const id = match.params.id\n    const [loading, setLoading] = React.useState(false)\n    const [isAdmin, setIsAdmin] = React.useState(false)\n    const { register, handleSubmit, errors } = useForm({\n        mode:\"onChange\"\n    })\n    const [buttonLoading,setButtonLoading] = React.useState(false)\n    const [item,setItem] = React.useState({})\n    React.useEffect(() => {\n        let mounted = true\n        async function initializeEditItem() {\n            setLoading(true)\n            if (Object.keys(loggedinUser).length !== 0) {\n                const isAdminResponse = await getSingleDocument('users', loggedinUser.id)\n                console.log(isAdminResponse)\n                if (isAdminResponse.isAdmin) {\n                    setIsAdmin(true)\n                    const itemData = await getSingleDocument(collectionName, id)\n                    setItem(itemData)\n                }    \n            }\n                setLoading(false)\n        }\n        \n            initializeEditItem()\n        \n        return () => { mounted = false }\n    }, [])\n    \n        const formData = [\n        {\n            name: collectionName===\"pots\"||collectionName===\"bowls\"?\"type\":\"name\",\n            error: errors.type,\n            helperText: errors.type ? errors.type.message : null,\n            value: (Object.keys(item)!==0 && (collectionName===\"pots\"||collectionName===\"bowls\"))?item.type:item.name,\n            type:\"text\"\n            },\n        {\n             name: \"price\",\n            error: errors.price,\n            helperText: errors.price ? errors.price.message : null,\n            value: item.price,\n            type:\"number\"\n        }   \n    ]\n    if (collectionName === \"pots\" || collectionName === \"bowls\") {\n        formData.push({\n                    name: \"color\",\n                    error: errors.color,\n                    helperText: errors.color ? errors.color.message : null,\n            value: item.color,\n                    type:\"text\"\n                })\n    }\n\n    const updateEditedDocument = async(data) => {\n        setButtonLoading(true)\n    if(data.image.length!==0)\n    {\n      let url = await uploadImage(collectionName,new Date().toLocaleDateString(),data.image[0])\n      delete data.image\n            data.imageUrl = url\n        await updateDocument(collectionName, id, data)\n        setButtonLoading(false)\n    }\n    else {\n        delete data.image\n        await updateDocument(collectionName, id, data)\n        setButtonLoading(false)\n    }\n    history.push(`/${collectionName===\"giftPlants\"?'gitf/plants':collectionName===\"plants\"?'':collectionName}`)\n  }\n\n    if (!loading) {\n        if (isAdmin) {\n            return (\n                <CommonItemForm item={item} collectionName={collectionName} loading={buttonLoading} register={register} handleFunction={handleSubmit(updateEditedDocument)} formData={formData} />\n            )\n        }\n        else {\n            return (<center><Typography component=\"h1\" variant=\"h4\" color=\"secondary\">You have no access to this page</Typography></center>)\n        }\n    }\n    else {\n       return  <center><Loader/></center>\n    }\n}\n\nexport default Index"]},"metadata":{},"sourceType":"module"}