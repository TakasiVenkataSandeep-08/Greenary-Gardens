{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/takasivenkatasandeep/Desktop/nursery/src/Containers/CreateItem/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { getSingleDocument } from '../../services/firebase';\nimport Loader from '../../Components/Loader';\nimport { Typography } from '@material-ui/core';\nimport CommonItemForm from '../../Components/CommonItemForm';\nimport { useForm } from 'react-hook-form';\nimport { uploadImage, addDocument } from '../../services/firebase';\n\nfunction Index({\n  loggedinUser,\n  match\n}) {\n  _s();\n\n  const collectionName = match.params.collectionName;\n  const [loading, setLoading] = React.useState(false);\n  const [isAdmin, setIsAdmin] = React.useState(false);\n  const [buttonLoading, setButtonLoading] = React.useState(false);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  React.useEffect(() => {\n    var mounted = true;\n\n    async function initializeCreateItem() {\n      setLoading(true);\n\n      if (Object.keys(loggedinUser).length !== 0) {\n        const isAdminResponse = await getSingleDocument('users', loggedinUser.id);\n        console.log(isAdminResponse);\n\n        if (isAdminResponse.isAdmin) {\n          setIsAdmin(true);\n        }\n      }\n\n      setLoading(false);\n    }\n\n    initializeCreateItem();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  const formData = [{\n    name: collectionName === \"pots\" || collectionName === \"bowls\" ? \"type\" : \"name\",\n    error: errors.type,\n    helperText: errors.type ? errors.type.message : null,\n    type: \"text\"\n  }, {\n    name: \"price\",\n    error: errors.price,\n    helperText: errors.price ? errors.price.message : null,\n    type: \"number\"\n  }];\n\n  if (collectionName === \"pots\" || collectionName === \"bowls\") {\n    formData.push({\n      name: \"color\",\n      error: errors.color,\n      helperText: errors.color ? errors.color.message : null,\n      type: \"text\"\n    });\n  }\n\n  const createDocument = async data => {\n    setButtonLoading(true);\n\n    if (data.image.length !== 0) {\n      let url = await uploadImage(collectionName, new Date().toLocaleDateString(), data.image[0]);\n      delete data.image;\n      data.imageUrl = url;\n      await addDocument(collectionName, data);\n      setButtonLoading(false);\n      alert(`${collectionName.slice(0, -1)} added successfully!`);\n    } else {\n      setButtonLoading(false);\n      alert(\"please select an image!\");\n    }\n  };\n\n  if (!loading) {\n    if (isAdmin) {\n      return /*#__PURE__*/_jsxDEV(CommonItemForm, {\n        collectionName: collectionName,\n        loading: buttonLoading,\n        register: register,\n        handleFunction: handleSubmit(createDocument),\n        formData: formData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h4\",\n          color: \"secondary\",\n          children: \"You have no access to this page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 24\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 16\n    }, this);\n  }\n}\n\n_s(Index, \"iARODbl0vCriqnyBzrij5K/jIfQ=\", false, function () {\n  return [useForm];\n});\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/Users/takasivenkatasandeep/Desktop/nursery/src/Containers/CreateItem/index.js"],"names":["React","getSingleDocument","Loader","Typography","CommonItemForm","useForm","uploadImage","addDocument","Index","loggedinUser","match","collectionName","params","loading","setLoading","useState","isAdmin","setIsAdmin","buttonLoading","setButtonLoading","register","handleSubmit","errors","useEffect","mounted","initializeCreateItem","Object","keys","length","isAdminResponse","id","console","log","formData","name","error","type","helperText","message","price","push","color","createDocument","data","image","url","Date","toLocaleDateString","imageUrl","alert","slice"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {getSingleDocument} from '../../services/firebase'\nimport Loader from '../../Components/Loader'\nimport { Typography } from '@material-ui/core'\nimport CommonItemForm from '../../Components/CommonItemForm'\nimport {useForm} from 'react-hook-form'\nimport {uploadImage,addDocument} from '../../services/firebase'\n\nfunction Index({\n    loggedinUser,\n    match,\n}) {\n    const collectionName = match.params.collectionName\n    const [loading, setLoading] = React.useState(false)\n    const [isAdmin, setIsAdmin] = React.useState(false)\n    const [buttonLoading,setButtonLoading] = React.useState(false)\n    const {register,handleSubmit,errors} = useForm()\n    React.useEffect(() => {\n        var mounted = true\n        async function initializeCreateItem() {\n            setLoading(true)\n            if (Object.keys(loggedinUser).length !== 0) {\n                const isAdminResponse = await getSingleDocument('users', loggedinUser.id)\n                console.log(isAdminResponse)\n                if (isAdminResponse.isAdmin) {\n                    setIsAdmin(true)\n                }\n            }\n                setLoading(false)\n        }\n        \n            initializeCreateItem()\n        \n        return () => { mounted = false }\n    }, [])\n\n    const formData = [\n        {\n            name: collectionName===\"pots\"||collectionName===\"bowls\"?\"type\":\"name\",\n            error: errors.type,\n            helperText: errors.type ? errors.type.message : null,\n            type:\"text\"\n        },\n        {\n             name: \"price\",\n            error: errors.price,\n            helperText: errors.price ? errors.price.message : null,\n            type:\"number\"\n        }   \n    ]\n    if (collectionName === \"pots\" || collectionName === \"bowls\") {\n        formData.push({\n                    name: \"color\",\n                    error: errors.color,\n                    helperText: errors.color ? errors.color.message : null,\n                    type:\"text\"\n                })\n    }\n    \n    const createDocument = async(data) => {\n        setButtonLoading(true)\n        if (data.image.length !== 0) {\n            let url = await uploadImage(collectionName,new Date().toLocaleDateString(),data.image[0])\n            delete data.image\n            data.imageUrl = url\n            await addDocument(collectionName,data)\n            setButtonLoading(false)\n            alert(`${collectionName.slice(0,-1)} added successfully!`)\n            \n        }\n        else {\n            setButtonLoading(false)\n            alert(\"please select an image!\")\n        }\n    }\n\n    if (!loading) {\n        if (isAdmin) {\n            return (\n                <CommonItemForm collectionName={collectionName} loading={buttonLoading} register={register} handleFunction={handleSubmit(createDocument)} formData={formData} />\n            )\n        }\n        else {\n            return (<center><Typography component=\"h1\" variant=\"h4\" color=\"secondary\">You have no access to this page</Typography></center>)\n        }\n    }\n    else {\n       return  <center><Loader/></center>\n    }\n}\n\nexport default Index\n"]},"metadata":{},"sourceType":"module"}